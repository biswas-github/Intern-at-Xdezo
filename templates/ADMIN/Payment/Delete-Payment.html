{% extends "base.html" %}
{% block extrastyles %}
{% endblock extrastyles %}
{% block extrajs %}
{% endblock extrajs %}
{% block content %}
    <!-- Page Header & Breadcrumbs -->
    <header>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="{% url 'AdminDashboard' %}">DataManagement</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="{% url 'ViewPayment' %}">Finance</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">Delete Payment</li>
            </ol>
        </nav>
        <div class="d-flex justify-content-between align-items-center">
            <h1 class="page-title">Delete Payment Details</h1>
        </div>
    </header>
    <!-- Page Content Section -->
    <div class="page-section">
        <!-- .empty-state -->
        <div class="empty-state container pb-4 d-flex flex-column justify-content-center"
             style="min-height: 70vh">
            <!-- 1. The Icon (Visual Confirmation) -->
            <!-- Using a large Trash icon with a success check overlay look, or just a simple Success Circle -->
            <div class="state-figure mb-4">
                <span class="fa-stack fa-4x">
                    <i class="far fa-circle fa-stack-2x text-success"></i>
                    <i class="fa fa-check fa-stack-1x text-success"></i>
                </span>
            </div>
            <!-- 2. The Title -->
            <h3 class="state-header">Deleted Successfully!</h3>
            <!-- 3. The Description -->
            <p class="state-description lead text-muted">
                The record has been permanently removed from the system.
                <br>
                This action cannot be undone.
            </p>
            <!-- 4. Action Buttons -->
            <div class="state-action mt-3">
                <!-- Primary Action: Go Back to List -->
                <!-- Replace 'AdminDashboard' with the specific view you want (e.g., 'ViewStudent') -->
                <a href="{% url 'ViewPayment' %}" class="btn btn-primary px-5">
                    <i class="fa fa-arrow-left mr-2"></i> Back
                </a>
            </div>
        </div>
        <!-- /.empty-state -->
    </div>
{% endblock content %}
{% block bottomjs %}
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const studentSelect = document.getElementById('id_student');
        const enrollmentSelect = document.getElementById('id_enrollment');

        // 1. Sidebar Fix (From previous context - keeps sidebar active)
        const targetUrl = "{% url 'ViewPayment' %}"; 
        const activeLink = document.querySelector(`#stacked-menu .menu-link[href="${targetUrl}"]`);
        if (activeLink) {
            activeLink.classList.add('active');
            const parentItem = activeLink.closest('.menu-item');
            if (parentItem) parentItem.classList.add('has-active');
            const parentMenu = activeLink.closest('ul.menu');
            if (parentMenu && parentMenu.parentElement) {
                parentMenu.parentElement.classList.add('has-active', 'has-open');
            }
        }

        // 2. Mutual Exclusivity Logic (Student vs Enrollment)
        function toggleFields() {
            const studentVal = studentSelect.value;
            const enrollmentVal = enrollmentSelect.value;

            // Scenario A: Student is selected
            if (studentVal !== "") {
                enrollmentSelect.disabled = true;
                enrollmentSelect.value = ""; // Clear enrollment selection
            } 
            // Scenario B: Enrollment is selected
            else if (enrollmentVal !== "") {
                studentSelect.disabled = true;
                studentSelect.value = ""; // Clear student selection
                
                // CRITICAL: If student is disabled, we must remove 'required' 
                // or the browser won't let you submit the form.
                studentSelect.removeAttribute('required');
            } 
            // Scenario C: Both are empty (Reset)
            else {
                studentSelect.disabled = false;
                enrollmentSelect.disabled = false;
                
                // Re-add required to student as it is the default mandatory field
                studentSelect.setAttribute('required', 'required');
            }
        }

        // Listen for changes on both fields
        studentSelect.addEventListener('change', toggleFields);
        enrollmentSelect.addEventListener('change', toggleFields);
    });
    </script>
{% endblock bottomjs %}
